<!doctype html>

<html lang="ja">

  <head>

    <title>ページが見つかりません (404 Not found) - VKDBY</title>

    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <meta name="robots" content="noindex, nofollow">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <style>

      *, *::before, *::after {
        box-sizing: border-box;
      }

      * {
        margin: 0;
      }

      html {
        font-size: 16px;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #ffffff;
        display: grid;
        font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        font-size: clamp(1rem, 2.5vw, 1.25rem);
        -webkit-font-smoothing: antialiased;
        font-style: normal;
        font-weight: 400;
        letter-spacing: -0.0025em;
        line-height: 1.6;
        min-height: 100dvh;
        place-items: center;
        text-rendering: optimizeLegibility;
        -webkit-text-size-adjust: 100%;
      }

      @media (prefers-color-scheme: dark) {
        body {
          background: linear-gradient(135deg, #1e3a8a 0%, #4c1d95 100%);
        }
      }

      a {
        color: #ffffff;
        font-weight: 700;
        text-decoration: underline;
        text-underline-offset: 0.2em;
        transition: opacity 0.2s;
      }

      a:hover {
        opacity: 0.8;
      }

      main {
        display: grid;
        gap: 2em;
        padding: 2em;
        place-items: center;
        text-align: center;
        max-width: 600px;
      }

      .error-code {
        font-size: 8rem;
        font-weight: 900;
        line-height: 1;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        letter-spacing: -0.05em;
      }

      .error-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1em;
      }

      .error-message {
        font-size: 1rem;
        line-height: 1.8;
        opacity: 0.9;
      }

      .back-link {
        margin-top: 2em;
        display: inline-block;
        padding: 0.75em 2em;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50px;
        font-weight: 700;
        text-decoration: none;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s;
      }

      .back-link:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        opacity: 1;
      }
      
      .action-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 1em;
        justify-content: center;
        margin-top: 2em;
      }
      
      .create-link {
        background: #ffffff;
        color: #4c1d95;
        border: 2px solid #ffffff;
      }
      
      .create-link:hover {
        background: #f0f0f0;
        color: #3b0764;
      }

    </style>

  </head>

  <body>

    <main>
      <div class="error-code">404</div>
      <div>
        <h1 class="error-title">ページが見つかりません</h1>
        <p class="error-message">
          未作成、または存在しないページです。<br>
          URLが正しいかご確認ください。
        </p>
        
        <% if logged_in? && @unit_name.present? %>
          <div style="margin-top: 2em; padding: 1.5em; background: rgba(0,0,0,0.2); border-radius: 1em; backdrop-filter: blur(5px);">
            <p class="error-message" style="font-size: 0.9rem; margin-bottom: 1em;">
              管理者用メニュー: <br>
              <strong><%= @unit_name %></strong> はまだデータベースに登録されていません。
            </p>
            <div class="action-buttons" style="margin-top: 0;">
              <%= link_to "このユニットを作成する", new_admin_unit_path(name: @unit_name, old_key: @old_key), class: "back-link create-link", style: "margin-top: 0;" %>
            </div>
          </div>
        <% end %>
      </div>
      
      <div class="action-buttons">
        <a href="/" class="back-link">トップページへ戻る</a>
      </div>
    </main>

  </body>

</html>
