<div class="bg-white dark:bg-slate-800 p-5 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-900/40 transition-colors">
  <div>
    <div class="flex items-center gap-3 md:gap-4 mb-2 flex-wrap sm:flex-nowrap">
      <span class="text-xs font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest min-w-[4rem]"><%= member.part %></span>
      <h3 class="text-base md:text-lg font-black text-slate-800 dark:text-slate-100 flex-1">
        <%= link_to member.person.name, profile_path(member.person.key), class: "hover:text-person transition-colors" %>
      </h3>
      <% unless defined?(hide_active) && hide_active && member.status == "active" %>
        <span class="text-[0.65rem] font-black uppercase px-2 py-0.5 rounded-md 
          <%= case member.status
              when 'active' then 'bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400'
              when 'left' then 'bg-rose-100 dark:bg-rose-900/40 text-rose-700 dark:text-rose-400'
              when 'pre' then 'bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400'
              when 'pending' then 'bg-sky-100 dark:bg-sky-900/40 text-sky-700 dark:text-sky-400'
              else 'bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300'
              end %>">
          <%= member.status %>
        </span>
      <% end %>
    </div>
    <% if member.person.person_logs.present? %>
      <div class="mt-3 pl-4 border-l-2 border-slate-100 dark:border-slate-800 flex flex-col gap-1">
        <% member.person.person_logs.sort_by { |l| [l.log_date.to_s, l.sort_order || 0] }.each do |log| %>
          <div class="flex items-start gap-3 text-[0.7rem] leading-relaxed text-slate-500 dark:text-slate-400">
            <span class="font-black opacity-60 tabular-nums shrink-0"><%= log.log_date %></span>
            <span class="truncate">
              <% if log.unit %>
                <%= link_to (log.unit_name.presence || log.unit.name), profile_path(log.unit.key), class: "font-bold text-slate-600 dark:text-slate-300 hover:text-person" %>
              <% else %>
                <span class="font-bold"><%= log.name %></span>
              <% end %>
              <% if log.status.present? && log.status != "stay" %>
                <small class="text-[0.65rem] opacity-70 ml-1">(<%= log.status %>)</small>
              <% end %>
            </span>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
