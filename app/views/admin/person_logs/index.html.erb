<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="sm:flex sm:items-center">
    <div class="sm:flex-auto">
      <h1 class="text-xl font-semibold text-gray-900 dark:text-white">Person Logs for <%= @person.name %></h1>
      <p class="mt-2 text-sm text-gray-700 dark:text-gray-300">A list of all career logs for this person.</p>
    </div>
    <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
      <%= link_to "Back to Person", edit_admin_person_path(@person), class: "mr-4 inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-600" %>
      <%= link_to "Add Person Log", new_admin_person_person_log_path(@person), class: "inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto" %>
    </div>
  </div>

  <% if @person.old_history.present? %>
    <div class="mt-6 mb-8 bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
      <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-4">Wiki Career History (Reference)</h3>
      <div class="space-y-2">
        <% @person.old_history.to_s.split('â†’').map(&:strip).reject(&:empty?).each do |history_item| %>
          <div class="flex items-center justify-between bg-white dark:bg-gray-700 p-3 rounded shadow-sm border border-gray-200 dark:border-gray-600">
            <div class="text-sm text-gray-800 dark:text-gray-200 font-mono break-all mr-4">
              <%= format_wiki_history_item(history_item).html_safe %>
            </div>
            <%= link_to new_admin_person_person_log_path(@person, initial_text: history_item), class: "inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900 dark:hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 whitespace-nowrap" do %>
              <svg class="mr-1.5 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              Add Log
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <%= render "list", person: @person, person_logs: @person_logs %>
</div>
